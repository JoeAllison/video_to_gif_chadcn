<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple GIF Test</title>
</head>
<body>
    <h1>Simple GIF Test</h1>
    <button onclick="testSimpleGif()">Test Simple GIF</button>
    <div id="output"></div>

    <script src="https://cdn.jsdelivr.net/npm/gif.js@0.2.0/dist/gif.js"></script>
    <script>
        function testSimpleGif() {
            const output = document.getElementById('output');
            output.innerHTML = 'Testing GIF generation...';
            
            // Try to create a GIF using the library
            try {
                // Check if GIF library is available
                if (typeof GIF === 'undefined') {
                    output.innerHTML = 'ERROR: GIF library not loaded!';
                    return;
                }
                
                output.innerHTML = 'GIF library loaded, creating GIF object...';
                
                // Create GIF object
                const gif = new GIF({
                    workers: 1,
                    quality: 10,
                    width: 100,
                    height: 100,
                    workerScript: 'gif.worker.js'
                });
                
                output.innerHTML = 'GIF object created, adding frames...';
                
                // Create canvas
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 100;
                canvas.height = 100;
                
                // Add a few simple frames
                for (let i = 0; i < 5; i++) {
                    // Clear and draw
                    ctx.fillStyle = 'white';
                    ctx.fillRect(0, 0, 100, 100);
                    ctx.fillStyle = `rgb(${i * 50}, 100, 150)`;
                    ctx.fillRect(10 + i * 10, 10 + i * 5, 80 - i * 10, 80 - i * 10);
                    
                    // Add frame
                    gif.addFrame(canvas, { delay: 500 });
                }
                
                output.innerHTML = 'Frames added, rendering...';
                
                // Set up event handlers
                gif.on('finished', function(blob) {
                    output.innerHTML = `
                        <h3>GIF Generated!</h3>
                        <p>Size: ${blob.size} bytes</p>
                        <p>Type: ${blob.type}</p>
                        <img src="${URL.createObjectURL(blob)}" alt="Generated GIF">
                    `;
                });
                
                gif.on('error', function(error) {
                    output.innerHTML = `ERROR: ${error}`;
                });
                
                // Render
                gif.render();
                
            } catch (error) {
                output.innerHTML = `ERROR: ${error.message}`;
                console.error('GIF creation error:', error);
            }
        }
    </script>
</body>
</html>
